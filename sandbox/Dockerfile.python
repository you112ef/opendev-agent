FROM python:3.11-slim

# Set working directory
WORKDIR /workspace

# Install common Python packages
RUN pip install --no-cache-dir \
    requests \
    numpy \
    pandas \
    pytest \
    black \
    flake8 \
    mypy

# Create a non-root user
RUN useradd -m -u 1000 sandbox && \
    chown -R sandbox:sandbox /workspace

USER sandbox

# Set environment variables
ENV PYTHONUNBUFFERED=1
ENV PYTHONDONTWRITEBYTECODE=1

CMD ["/bin/bash"]
